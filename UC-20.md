# Use Case UC-20: Pay Conference Registration Fee Online

## Goal
An authenticated attendee pays the conference registration fee online so their registration becomes paid and confirmed.

## Preconditions
- Attendee is authenticated.
- Attendee has a selected registration category.
- Online payment is enabled.

## Main Success Scenario
1. Attendee opens the payment step for registration.
2. System shows selected category and total fee.
3. Attendee chooses Pay Online.
4. System redirects attendee to payment gateway.
5. Attendee submits valid payment details.
6. Gateway returns success confirmation.
7. CMS verifies confirmation and records payment.
8. CMS updates registration to `paid_confirmed`.
9. CMS shows confirmation and sends receipt notification.

## Extensions
- 4a: Attendee cancels at gateway.
  - 4a1: CMS returns attendee with unpaid status and no payment record.
- 5a: Gateway rejects invalid details.
  - 5a1: CMS keeps registration unpaid and shows correction guidance.
- 6a: Provider declines transaction.
  - 6a1: CMS keeps registration unpaid and shows decline feedback.
- 7a: Confirmation timeout or missing callback.
  - 7a1: CMS sets unresolved/pending outcome and avoids false confirmation.
- 8a: Gateway success but persistence fails.
  - 8a1: CMS does not confirm registration and creates reconciliation item.

## Success End Condition
Payment is recorded and registration remains `paid_confirmed` across refresh and re-login.

## Failed End Condition
Registration stays unpaid or pending unresolved, with clear attendee feedback and reconciliation when needed.

