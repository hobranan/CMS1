openapi: 3.0.3
info:
  title: Public Announcements API
  version: 1.0.0
  description: Contract for UC-22 public announcement list/detail retrieval.
servers:
  - url: https://cms.example.com
paths:
  /announcements:
    get:
      summary: List public announcements
      operationId: listPublicAnnouncements
      tags: [Announcements]
      responses:
        "200":
          description: Public announcements returned (may be empty).
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/AnnouncementListItem"
                required: [items]
        "500":
          description: Announcement retrieval failure.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SystemError"

  /announcements/{announcementId}:
    get:
      summary: Get public announcement detail
      operationId: getPublicAnnouncement
      tags: [Announcements]
      parameters:
        - name: announcementId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Public announcement detail returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AnnouncementDetail"
        "404":
          description: Announcement unavailable or no longer public.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnavailableError"
        "500":
          description: Detail retrieval failure.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SystemError"

components:
  schemas:
    AnnouncementListItem:
      type: object
      properties:
        announcementId:
          type: string
        title:
          type: string
        publishedAt:
          type: string
          format: date-time
        summary:
          type: string
          nullable: true
      required: [announcementId, title, publishedAt]

    AnnouncementDetail:
      type: object
      properties:
        announcementId:
          type: string
        title:
          type: string
        content:
          type: string
        publishedAt:
          type: string
          format: date-time
      required: [announcementId, title, content, publishedAt]

    UnavailableError:
      type: object
      properties:
        code:
          type: string
          enum: [ANNOUNCEMENT_UNAVAILABLE]
        message:
          type: string
      required: [code, message]

    SystemError:
      type: object
      properties:
        code:
          type: string
          enum: [SYSTEM_ERROR]
        message:
          type: string
      required: [code, message]
